!function(t){function a(r){if(e[r])return e[r].exports;var n=e[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}([function(t,a,e){function r(t,a){for(var e=t*a,r=new Uint8Array(e),n=new o,i=1,u=100*Math.random(),s=0;s<4;s++){for(var l=0;l<e;l++){var c=l%t,d=~~(l/t);r[l]+=Math.abs(n.noise(c/i,d/i,u)*i*1.75)}i*=5}return r}function n(t,a,e,r,n,o){var i=new THREE.Vector3(o.x,o.y,o.z);i.normalize();var u=document.createElement("canvas");u.width=a,u.height=e;var s=u.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,a,e);for(var l,c=s.getImageData(0,0,u.width,u.height),d=c.data,m=256*r.r,h=256*r.g,E=256*r.b,f=256*n.r,g=256*n.g,p=256*n.b,v=new THREE.Vector3(0,0,0),w=0,T=0,R=d.length;w<R;w+=4,T++)v.x=t[T-2]-t[T+2],v.y=2,v.z=t[T-2*a]-t[T+2*a],v.normalize(),l=v.dot(i),d[w]=(m+l*f)*(.5+.007*t[T]),d[w+1]=(h+l*p)*(.5+.007*t[T]),d[w+2]=(E+l*g)*(.5+.007*t[T]);s.putImageData(c,0,0);var x=document.createElement("canvas");x.width=4*a,x.height=4*e,s=x.getContext("2d"),s.scale(4,4),s.drawImage(u,0,0),c=s.getImageData(0,0,x.width,x.height),d=c.data;for(var w=0,R=d.length;w<R;w+=4){var C=~~(5*Math.random());d[w]+=C,d[w+1]+=C,d[w+2]+=C}return s.putImageData(c,0,0),x}var o=e(1);AFRAME.registerComponent("mountain",{schema:{color:{"default":"rgb(92, 32, 0)"},shadowColor:{"default":"rgb(128, 96, 96)"},sunPosition:{type:"vec3","default":{x:1,y:1,z:1}}},update:function(){var t=this.data,a=256,e=256,o=r(e,a),i=n(o,e,a,new THREE.Color(t.color),new THREE.Color(t.shadowColor),t.sunPosition),u=new THREE.CanvasTexture(i);u.wrapS=THREE.ClampToEdgeWrapping,u.wrapT=THREE.ClampToEdgeWrapping;var s=new THREE.PlaneBufferGeometry(7500,7500,e-1,a-1);s.rotateX(-Math.PI/2);for(var l=s.attributes.position.array,c=0,d=0,m=l.length;c<m;c++,d+=3)l[d+1]=10*o[c];s.translate(0,-1*(10*o[e/2+a/2*e]+500),0);var h=(new THREE.MeshBasicMaterial({map:u}),new THREE.Mesh(s,new THREE.MeshBasicMaterial({map:u})));this.el.setObject3D("mesh",h)}}),AFRAME.registerPrimitive("a-mountain",{defaultComponents:{mountain:{}},mappings:{color:"mountain.color","shadow-color":"mountain.shadowColor","sun-position":"mountain.sunPosition"}})},function(t,a){var e=function(){function t(t){return t*t*t*(t*(6*t-15)+10)}function a(t,a,e){return a+t*(e-a)}function e(t,a,e,r){var n=15&t,o=n<8?a:e,i=n<4?e:12==n||14==n?a:r;return(0==(1&n)?o:-o)+(0==(2&n)?i:-i)}for(var r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],n=0;n<256;n++)r[256+n]=r[n];return{noise:function(n,o,i){var u=~~n,s=~~o,l=~~i,c=255&u,d=255&s,m=255&l;n-=u,o-=s,i-=l;var h=n-1,E=o-1,f=i-1,g=t(n),p=t(o),v=t(i),w=r[c]+d,T=r[w]+m,R=r[w+1]+m,x=r[c+1]+d,C=r[x]+m,H=r[x+1]+m;return a(v,a(p,a(g,e(r[T],n,o,i),e(r[C],h,o,i)),a(g,e(r[R],n,E,i),e(r[H],h,E,i))),a(p,a(g,e(r[T+1],n,o,f),e(r[C+1],h,o,i-1)),a(g,e(r[R+1],n,E,f),e(r[H+1],h,E,f))))}}};t.exports=e}]);